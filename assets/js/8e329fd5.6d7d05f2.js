"use strict";(self.webpackChunksurvey_design_workbench=self.webpackChunksurvey_design_workbench||[]).push([[63],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=i.createContext({}),s=function(e){var t=i.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=s(e.components);return i.createElement(c.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},g=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=s(n),g=a,m=p["".concat(c,".").concat(g)]||p[g]||d[g]||r;return n?i.createElement(m,o(o({ref:t},u),{},{components:n})):i.createElement(m,o({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=g;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[p]="string"==typeof e?e:a,o[1]=l;for(var s=2;s<r;s++)o[s]=n[s];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}g.displayName="MDXCreateElement"},3937:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var i=n(7462),a=(n(7294),n(3905));const r={title:"Getting Started",sidebar_position:2,slug:"/stromae-v2/getting-started"},o="Getting Started",l={unversionedId:"applications/stromae-v2/getting-started",id:"applications/stromae-v2/getting-started",title:"Getting Started",description:"Quick Start",source:"@site/docs/applications/stromae-v2/getting-started.md",sourceDirName:"applications/stromae-v2",slug:"/stromae-v2/getting-started",permalink:"/survey-design-workbench/docs/stromae-v2/getting-started",draft:!1,editUrl:"https://github.com/ddecrulle/survey-design-workbench/tree/main/docs/applications/stromae-v2/getting-started.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Getting Started",sidebar_position:2,slug:"/stromae-v2/getting-started"},sidebar:"tutorialSidebar",previous:{title:"Stromae V2",permalink:"/survey-design-workbench/docs/stromae-v2"},next:{title:"CI",permalink:"/survey-design-workbench/docs/applications/stromae-v2/ci"}},c={},s=[{value:"Quick Start",id:"quick-start",level:2},{value:"404 Pages",id:"404-pages",level:2},{value:"Environnement values",id:"environnement-values",level:2},{value:"Local configuration",id:"local-configuration",level:3},{value:"Node 18",id:"node-18",level:2}],u={toc:s};function p(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,i.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"getting-started"},"Getting Started"),(0,a.kt)("h2",{id:"quick-start"},"Quick Start"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"// Git clone the master branch of the v2 version\ngit clone -b v2-master git@github.com:InseeFr/Stromae.git\ncd Stromae\n// Download dependencies\nyarn\n// Launch VSCODE\ncode .\nyarn start\n")),(0,a.kt)("p",null,"You must see this screen with an error :"),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(3615).Z,width:"1864",height:"626"})),(0,a.kt)("p",null,"This error is caused by the authentification provider which received an invalid environnement value."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(9762).Z,width:"845",height:"487"})),(0,a.kt)("p",null,"A quick fix is to modify the ",(0,a.kt)("inlineCode",{parentName:"p"},"build-configuration.json")," file located in public directory."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="public/build-configuration.json"',title:'"public/build-configuration.json"'},'{\n  // highlight-start\n  //"authenticationType": "${AUTHENTICATION_TYPE}",\n  "authenticationType": "NONE"\n   // highlight-end\n  "_authenticationType_comment_": "Authentication type : OIDC or NONE",\n  "apiUrl": "${API_URL}",\n  "portail": "${PORTAIL_URL}"\n}\n')),(0,a.kt)("h2",{id:"404-pages"},"404 Pages"),(0,a.kt)("p",null,"Once your ready, you must redirected to a 404 page."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(4751).Z,width:"1684",height:"1048"})),(0,a.kt)("p",null,"This is the correct behavior. Stromae is an application included in an IS with a micro service architecture. The respondents are redirected to Stromae with query param in the url."),(0,a.kt)("p",null,"There is however a visualization page at the root ",(0,a.kt)("inlineCode",{parentName:"p"},"visualize")," (http://localhost:3000/visualize). It is visualization, there is no persistent data, authentication (even if it is enabled) etc..."),(0,a.kt)("h2",{id:"environnement-values"},"Environnement values"),(0,a.kt)("p",null,"Due to an old strange delivery constraint in production, environment variables are managed with json static files in the public folder."),(0,a.kt)("p",null,"The environment variables related to authentication to keycloak are present in the ",(0,a.kt)("inlineCode",{parentName:"p"},"keycloak.json")," file and the others in the ",(0,a.kt)("inlineCode",{parentName:"p"},"configuration.json")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"build-configuration.json")," file"),(0,a.kt)("p",null,"Today, in Stromae V2, the ",(0,a.kt)("inlineCode",{parentName:"p"},"configuration.json")," file has no use and could be removed."),(0,a.kt)("p",null,"A work on environnement value could be very useful. We should be able to manage environment variables in the classical way with ",(0,a.kt)("inlineCode",{parentName:"p"},".env")," files."),(0,a.kt)("h3",{id:"local-configuration"},"Local configuration"),(0,a.kt)("p",null,"To have a local configuration there is a trick. Use a file ",(0,a.kt)("inlineCode",{parentName:"p"},"configuration-local.json")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"keycloak-local.json")," which are not commited because added to the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/InseeFr/Stromae/blob/083b8d05f51150cba6fcbdc6d89fda70121057ce/.gitignore#L21-L23"},(0,a.kt)("inlineCode",{parentName:"a"},".gitignore")),"."),(0,a.kt)("p",null,"Then, you have to run this following CLI"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cp .env .env.local\necho REACT_APP_NAME_CONFIG_FILE=configuration-local.json >> .env.local\necho REACT_APP_NAME_OIDC_FILE=keycloak-local.json >> .env.local\ncp public/build-configuration.json public/configuration-local.json\ncp public/keycloak.json public/keycloak-local.json\n")),(0,a.kt)("p",null,"and to modify ",(0,a.kt)("inlineCode",{parentName:"p"},"public/configuration-local.json")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"public/keycloak-local.json")," file as expected."),(0,a.kt)("h2",{id:"node-18"},"Node 18"),(0,a.kt)("p",null,"The project is not currently supporting node 18. This is a known issue which need to be solved. You can use node 16 instead."))}p.isMDXComponent=!0},4751:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/404-193a5150c84399d29774562495941f01.png"},9762:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/auth-error-e7d7111d13cf2cd34f7bd744fc7d6973.png"},3615:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/error-4477a148db2c00e7d0b70f3dadb1abaf.png"}}]);